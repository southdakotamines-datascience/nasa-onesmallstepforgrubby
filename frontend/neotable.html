<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NEO Explorer</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #111;
    color: #eee;
    margin: 0;
    padding: 20px;
  }
  h1 { text-align: center; }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background-color: #222;
  }
  th, td {
    padding: 10px;
    text-align: center;
    border: 1px solid #555;
    position: relative;
  }
  th {
    background-color: #333;
    cursor: default;
  }
  tr:nth-child(even) { background-color: #1a1a1a; }
  tr:hover { background-color: #444; }

  /* Info icon tooltip */
  th .info {
    font-size: 1em;
    color: #ffcc00;
    font-weight: bold;
    margin-left: 5px;
    cursor: pointer;
  }
  th .info:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: #fff;
    padding: 5px 8px;
    border-radius: 4px;
    white-space: nowrap;
    font-size: 0.8em;
    z-index: 10;
  }

  /* Back button */
  #backButton {
    display: inline-block;
    margin-bottom: 20px;
    padding: 10px 16px;
    background: #333;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    text-decoration: none;
  }
  #backButton:hover {
    background: #555;
  }
</style>
</head>
<body>

<a id="backButton" href="index.html">&larr; Back to Main Menu</a>

<h1>Near-Earth Objects from NASA's database (NEOs)</h1>

<table id="neoTable">
  <thead>
    <tr>
      <th>Name <span class="info" data-tooltip="The official designation of the NEO.">(i)</span></th>
      <th>Close Approach Date <span class="info" data-tooltip="The date when the object will be closest to Earth.">(i)</span></th>
      <th>Distance (AU) <span class="info" data-tooltip="Distance from Earth in astronomical units (1 AU â‰ˆ distance from Earth to Sun).">(i)</span></th>
      <th>Speed (km/s) <span class="info" data-tooltip="Relative speed of the object with respect to Earth in km/s.">(i)</span></th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<script>
async function fetchNEOs() {
  try {
    const namesRes = await fetch('http://127.0.0.1:5000/get_asteroid_names');
    const names = await namesRes.json();

    const tbody = document.getElementById('neoTable').querySelector('tbody');

    for (const name of names) {
      const dataRes = await fetch(`http://127.0.0.1:5000/get_asteroid?name=${encodeURIComponent(name)}`);
      const data = await dataRes.json();

      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${data.name}</td>
        <td>${data.date}</td>
        <td>${data.distance}</td>
        <td>${data.speed}</td>
      `;
      tbody.appendChild(row);
    }
  } catch (err) {
    console.error('Error fetching NEO data:', err);
  }
}
fetchNEOs();
</script>

</body>
</html>
